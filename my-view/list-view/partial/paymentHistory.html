<!--

    //*******************************************************************************
    // * Copyright (c) 2011-2014 CSC.
    // * Copyright (C) 2010-2016 CSC - All rights reserved.
    // *
    // * The information contained in this document is the exclusive property of
    // * CSC.  This work is protected under USA copyright law
    // * and the copyright laws of given countries of origin and international
    // * laws, treaties and/or conventions. No part of this document may be
    // * reproduced or transmitted in any form or by any means, electronic or
    // * mechanical including photocopying or by any informational storage or
    // * retrieval system, unless as expressly permitted by CSC.
    //
    // * Design, Develop and Manage by Team Integral Point-of-Sales & Services
    // ******************************************************************************

-->

<div class="paymentHistory" style="width:80%; margin: 0 auto;">
	<div flex layout="row"  layout-align="center center" >
		 <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 summary">
		     <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 centered summary">
		         <div class="form-group form-group-lg has-success">
		             <span style="font-size: xx-large;">{{'v3.transactioncenter.label.PaymentHistory' | translate}}</span>
		         </div>
		     </div>
		</div>
	</div>
	<div flex layout="row"  layout-align="center center" style="margin-top: 15px;">
		<div class="container-fluid v3-padding-0" style="padding-top: 15px!important">
		<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 v3-column-content">
			<div class="col-xs-offset-1 col-xs-10 v3-column-content">
				<div class="form-group form-group-lg has-success">
					<label>{{"new.v3.transactioncenter.transactioncenter.label.ReferenceNo" | translate}}</label>
					<input class="form-control" type="text" ng-model="referenceNo" />
				</div>
			</div>
		</div>
		<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 v3-column-content">
			<div class="col-xs-offset-1 col-xs-10 v3-column-content">
			    <div class="form-group form-group-lg has-success">
			        <label>{{"new.v3.transactioncenter.transactioncenter.label.PaymentSubmissionNo" | translate}}</label>
			        <input class="form-control" type="text" ng-model="submissionNo" />
			    </div>
			</div>
		</div>
		<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
			<div class="col-xs-offset-1 col-xs-10 v3-column-content">
		       <div class="form-group form-group-lg has-success">
		           <label>{{"new.v3.transactioncenter.transactioncenter.label.PaymentDateFrom" | translate}}</label>
		           <div style="position:relative"><input ms-datepicker ng-model="paymentDateFrom" class="ms-calendar"/></div>
		       </div>
		   </div>
		</div>
		<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
			<div class="col-xs-offset-1 col-xs-10 v3-column-content">
		        <div class="form-group form-group-lg has-success">
		            <label>{{"new.v3.transactioncenter.transactioncenter.label.PaymentDateTo" | translate}}</label>
		            <div style="position:relative"><input ms-datepicker ng-model="paymentDateTo" class="ms-calendar"/></div>
		        </div>
		    </div>
		</div>		
		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
		 	<div class="col-xs-offset-1 col-xs-10"	style="margin-bottom: 20px;">
		        <div class="form-group form-group-lg has-success" style="text-align: center;">		            
		        	<button class="btn btn-lg v3-btn-primary" style="width: 200px" ng-click="searchPayment()">{{"new.v3.transactioncenter.transactioncenter.button.Search" | translate}}</button>
		        </div>
		    </div>
		</div>	
		</div>
	</div>
	
	<div flex layout="row" class="ipos_portlet_table_header_item_transaction" layout-align="center center" style="line-height: 30px; height: 60px; margin-top: 35px;">
		<div flex="100"></div>
	</div>

	<div class="ipos_portlet_table_header_item_transaction_row" ng-class="$index%2==0?'row_odd':'row_even'" dir-paginate="payment in clientPaymentList | itemsPerPage: pageSize" current-page="currentPage">
		<div class="container-fluid v3-padding-0">
			<div class="row">
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">  
				   <div class="col-xs-12 v3-padding-left-0 margin-top-10">
					   <div style="padding-left: 0px;">
							<div class="form-group form-group-lg has-success form-label">
							    <label>{{"new.v3.transactioncenter.transactioncenter.label.ReferenceNo" | translate}} : <a href="" ng-click="openPdfReferenceNo(payment)">{{payment.ReferenceNo}}</a></label> 
						  	</div>
					  	</div>
				   </div>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">  
				   <div class="col-xs-12 v3-padding-left-0 margin-top-10">
					   <div style="padding-left: 0px;">
							<div class="form-group form-group-lg has-success form-label">
							    <label>{{"new.v3.transactioncenter.transactioncenter.label.TransactionType" | translate}} :</label>   {{"v3.payment.transactiontype." + payment.CaseType | translate }}
						  	</div>
					  	</div>
				   </div>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">   
				   <div class="col-xs-12 v3-padding-left-0">
					   <div style="padding-left: 0px;">
							<div class="form-group form-group-lg has-success form-label">
							    <label>{{"new.v3.transactioncenter.transactioncenter.label.DatePaidtoCompany" | translate}} : </label>{{payment.AgentPaymentDate | dateFilter}}
						  	</div>
					  	</div>
				   </div>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">   
				   <div class="col-xs-12 v3-padding-left-0">
					   <div style="padding-left: 0px;">
							<div class="form-group form-group-lg has-success form-label">
							    <label>{{"new.v3.transactioncenter.transactioncenter.label.ProductName" | translate}} : </label> {{'v3.mynewworkspace.portlet.label.productName.' + payment.Product | translate }}
						  	</div>
					  	</div>
				   </div>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">   
				   <div class="col-xs-12 v3-padding-left-0">
					   <div style="padding-left: 0px;">
							<div class="form-group form-group-lg has-success form-label">
							    <label>{{"new.v3.transactioncenter.transactioncenter.label.AmountPaid" | translate}} ({{payment.LocalCurrency}}): </label> {{payment.PayableAmountEx}}
						  	</div>
					  	</div>
				   </div>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">   
				   <div class="col-xs-12 v3-padding-left-0">
					   <div style="padding-left: 0px;">
							<div class="form-group form-group-lg has-success form-label">
							    <label>{{"new.v3.transactioncenter.transactioncenter.label.PaymentSubmissionNo" | translate}} : <a class="pointer" ng-click="printPdf('agent-payment', payment.AgentPaymentId)">{{payment.DocName}}</a></label> 
						  	</div>
					  	</div>
				   </div>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">   
				   <div class="col-xs-12 v3-padding-left-0">
					   <div style="padding-left: 0px;">
							<div class="form-group form-group-lg has-success form-label">
							    <label>{{"new.v3.transactioncenter.transactioncenter.label.PaymentMethod" | translate}} : </label> {{"v3.paymentMethod." + payment.AgentPaymentMethod | translate | trimtext:false:20:'..'}}
						  	</div>
					  	</div>
				   </div>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">   
				   <div class="col-xs-12 v3-padding-left-0">
					   <div style="padding-left: 0px;">
							<div class="form-group form-group-lg has-success form-label">
							    <label>{{"new.v3.transactioncenter.transactioncenter.label.PolicyOwner" | translate}} : </label> {{payment.POFullName}}
						  	</div>
					  	</div>
				   </div>
				</div>
				
				
				<!-- more detail -->
				<div  class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding:0px">
					<div id="detail_{{$index}}" class="cssSlideUp2" ng-hide="payment.isShow">
						<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6" ng-if="payment.AgentPaymentMethod == 'CHEQUE'">
							<div class="form-group form-group-lg has-success form-label">
								<label>{{"new.v3.transactioncenter.transactioncenter.label.ChequeNumber" | translate}} : </label> {{payment.ChequeNo}}
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6" ng-if="payment.AgentPaymentMethod == 'BT'">
							<div class="form-group form-group-lg has-success  form-label" >
								<label>{{"new.v3.transactioncenter.transactioncenter.label.AdviceNo" | translate}} : </label> {{payment.AdviceNo}}
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 ">
							<div class="form-group form-group-lg has-success  form-label">
								<label>{{"new.v3.transactioncenter.transactioncenter.label.TotalSumInsured" | translate}} ({{payment.SICurrency}}) : </label> {{"v3.yesno.enum.NA" | translate}}	
								<!-- {{payment.SumInsured | currency:"":0}}	 -->		 					
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 " ng-if="payment.AgentPaymentMethod == 'CHEQUE'">
							<div class="form-group form-group-lg has-success form-label">
								<label>{{"new.v3.transactioncenter.transactioncenter.label.ChequeDate" | translate}} : </label>  {{payment.ChequeDate | dateFilter}}
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 " ng-if="payment.AgentPaymentMethod == 'BT'">
							<div class="form-group form-group-lg has-success form-label">
								<label>{{"new.v3.transactioncenter.transactioncenter.label.AdviceDate" | translate}} : </label> {{payment.AdviceDate | dateFilter}}
							</div>
						</div>
						
						<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6" ng-if="payment.AgentPaymentMethod == 'CHEQUE'">
							<div class="form-group form-group-lg has-success form-label">
								<label>{{"new.v3.transactioncenter.transactioncenter.label.BankName" | translate}} : </label> {{"v3.bankName." + payment.BankName | translate}}
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
							<div class="form-group form-group-lg has-success form-label">
								<label>{{"new.v3.transactioncenter.transactioncenter.label.PayableAmount" | translate}} ({{payment.BillingCurrency}}) ({{"v3.paymentType.N" | translate}}) : </label>
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
							<div class="form-group form-group-lg has-success form-label">
								<label>{{"new.v3.transactioncenter.transactioncenter.label.PayableAmount" | translate}} ({{payment.BillingCurrency}}) ({{"v3.paymentType.G" | translate}}) : </label> {{payment.PayableAmount}}
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
							<div class="form-group form-group-lg has-success form-label">
								<label>{{"new.v3.transactioncenter.transactioncenter.label.DatePaidtoAgent" | translate}} : <a class="pointer" ng-click="printPdf('client-payment', payment.DocId)">{{moduleServiceTransaction.convertToDateTime(payment.PaymentDate,'DD/MM/YYYY')}}</a></label> 
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6" ng-if="payment.ExchangeRate!=undefined">
	                              <div class="form-group form-group-lg has-success form-label">
	                                  <div class="row">
	                                      <label>{{" v3.mynewworkspace.portlet.label.illustration-travel-express.ExchangeRate" | translate}} : </label> {{payment.ExchangeRate | v3Currency}}
	                                  </div>
	                              </div>
	                          </div>
	                              
	                          <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6" ng-if="payment.PayableAmountEx!=undefined">
	                              <div class="form-group form-group-lg has-success form-label">
	                                  <label>{{"new.v3.transactioncenter.transactioncenter.label.PayableAmount" | translate}} ({{payment.LocalCurrency}}) ({{"v3.paymentType.G" | translate}}) : </label> {{payment.PayableAmountEx}}
	                              </div>
	                          </div>
						<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
							<div class="form-group form-group-lg has-success form-label">
								<label>{{"new.v3.transactioncenter.transactioncenter.label.ReceiptNo" | translate}} : </label> {{payment.ReceiptNumber}}
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
							<div class="form-group form-group-lg has-success form-label">
								<label>{{"new.v3.transactioncenter.transactioncenter.label.Remark" | translate}} : </label>  {{payment.Remark.Comment.RemarkText}} 
							</div>
						</div>
						
						
					</div>
				</div>
				
	
				<!-- action list -->
				<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">   
				   <div class="col-xs-12 col-sm-6 col-md-6 col-lg-12 v3-padding-left-0 margin-top-10">
					   <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding-left: 0px;">
					   		<i id="endorse-submenu-caret-{{$index}}"  class="fa fa-angle-down fa-lg icon-action-list" ></i>
							<div class="form-group form-group-lg has-success action-list">
							    <a href="" ng-click="showTransactionDetail($index, payment)" ng-show="payment.isShow">{{"new.v3.transactioncenter.transactioncenter.hyperlink.More" | translate}} </a>
							    <a href="" ng-click="showTransactionDetail($index, payment)" ng-hide="payment.isShow">{{"new.v3.transactioncenter.transactioncenter.hyperlink.Less" | translate}} </a>
						  	</div>
						  	<i class="fa fa-star fa-lg icon-action-list" style="color: #f1c40f"></i>
						  	<div class="form-group form-group-lg has-success action-list">
							    <a href="">{{"new.v3.transactioncenter.transactioncenter.hyperlink.Star" | translate}}  </a>
						  	</div>
					  	</div>
				   </div>
				</div>
			</div>
		</div>
		<md-divider ></md-divider>
	</div>
	<div class="ipos_portlet_table_header_item_transaction_row" ng-if="!clientPaymentList.length" style="text-align: center; height: 100px; line-height: 100px;">
		No item is displayed
	</div>
	<md-divider ng-if="!paidPaymentList.length"></md-divider>
	<div layout-margin flex layout="row" layout-align="end center">	
		<div class="ipos_paging_margin_top_25" flex layout="row"  layout-align="end center">							
                           <span>{{'v3.transactioncenter.label.Itemsperpage' | translate}}</span>
                <select class="form-control ipos_paging_dropdown_70" ng-model="pageSize" ng-options="size as size for size in pageSizes">
				</select>
		</div>	
		<dir-pagination-controls boundary-links="true" max-size="5">
		</dir-pagination-controls>
	</div>
	<div ng-if="fileReaderService.isReader" ng-include src="contextPathTheme + '/views/template/fileReader/fileReader.html'"></div>
</div>